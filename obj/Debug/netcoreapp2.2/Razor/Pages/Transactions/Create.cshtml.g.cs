#pragma checksum "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/Transactions/Create.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b8a770b0cbb3c8b06f84f22178f5de1329093a37"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(SkyLightWeb.Pages.Transactions.Pages_Transactions_Create), @"mvc.1.0.razor-page", @"/Pages/Transactions/Create.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.RazorPageAttribute(@"/Pages/Transactions/Create.cshtml", typeof(SkyLightWeb.Pages.Transactions.Pages_Transactions_Create), null)]
namespace SkyLightWeb.Pages.Transactions
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/_ViewImports.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#line 2 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/_ViewImports.cshtml"
using SkyLightWeb;

#line default
#line hidden
#line 3 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/_ViewImports.cshtml"
using SkyLightWeb.Data;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b8a770b0cbb3c8b06f84f22178f5de1329093a37", @"/Pages/Transactions/Create.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"42d79aa224890f9b79ee6618ffe4ce74a53fc9c5", @"/Pages/_ViewImports.cshtml")]
    public class Pages_Transactions_Create : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("form-control"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(27, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 4 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/Transactions/Create.cshtml"
  
    ViewData["Title"] = "Create";

#line default
#line hidden
            BeginContext(71, 2717, true);
            WriteLiteral(@"


<!-- 
<body>
    <div class='container'>
        <div class='panel panel-primary dialog-panel'>
            <div class='panel-heading'>
                <h5>Transaction Manager - Transaction Enrollment</h5>
            </div>
           
            <div class='panel-body'>
                <form class='form-horizontal' form method=""post"">
                    <div asp-validation-summary=""ModelOnly"" class=""text-danger""></div>

                    <div class='form-group'>
                        <label class='control-label col-md-2 col-md-offset-2' asp-for=""Transaction.TransactionID""></label>

                        <div class='col-md-3 indent-small'>
                            <div class='form-group internal'>
                                <input class='form-control' asp-for=""Transaction.TransactionID"" placeholder='Transaction ID' type='text'>
                            </div>
                        </div>
                        <div class='col-md-3 indent-small'>
              ");
            WriteLiteral(@"              <div class='form-group internal'>
                                <input class='form-control' asp-for=""Transaction.TransactionName"" placeholder='Transaction Name' type='text'>
                            </div>
                        </div>
                    </div>
                    <div class='form-group'>
                        <div class='form-group'>
                            <label class='control-label col-md-2 col-md-offset-2' asp-for=""Transaction.Description""></label>
                            <div class='col-md-6'>
                                <textarea class='form-control' asp-for=""Transaction.Description"" placeholder='Transaction Description' rows='3'></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class='form-group'>
                        <label class='control-label col-md-2 col-md-offset-2' for='id_email'>Others One</label>
                        <div");
            WriteLiteral(@" class='col-md-6'>
                            <div class='form-group'>
                                <div class='col-md-11'>
                                    <input class='form-control' placeholder='Others One' type='text'>
                                </div>
                            </div>
                            <div class='form-group internal'>
                                <div class='col-md-11'>
                                    <input class='form-control' placeholder='Others Two' type='text'>
                                </div>
                            </div>
                        </div>
                    </div>
");
            EndContext();
            BeginContext(5584, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(7031, 217, true);
            WriteLiteral("                    <div class=\'form-group\'>\r\n                        <div class=\'col-md-offset-4 col-md-3\'>\r\n                            <input type=\"submit\" value=\"Enroll Transaction\" class=\"btn-lg btn-primary\" />\r\n");
            EndContext();
            BeginContext(7358, 1826, true);
            WriteLiteral(@"                        </div>
                        <div>
                <a asp-page=""Index"">Back to List</a>
            </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
 -->
<div class='container'>
        <div class='panel panel-primary dialog-panel'>
            <div class='panel-heading'>
                <h5>Transaction details</h5>
            </div>
           
            <div class='panel-body'>
    <div class=""container"" style=""max-width:640px"">
        <div class=""master"">
            <table>
                <tr>
                    <td>Transaction ID</td>
                    <td>
                        <input type=""text"" class=""form-control"" id=""orderNo"" />
                        <span class=""error"">Transaction ID required</span>
                    </td>
                    <td>Transaction Date</td>
                    <td>
                        <input type=""text"" id=""transactionDate"" />
          ");
            WriteLiteral(@"              <span class=""error"">Valid transaction date required (ex. MM-dd-yyyy)</span>
                    </td>
                </tr>
                <tr>
                    <td>Description</td>
                    <td colspan=""3"">
                        <textarea id=""description"" class=""form-control"" style=""width:100%""></textarea>
                    </td>
                </tr>
            </table>
        </div>
        <div class=""table details"">
            <h4>Transaction Items</h4>
            <table width=""100%"">
                <tr>
                    <td>Asset Name</td>
                    <td>Quantity</td>
                    <td>Rate</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                <h4>Equipments</h4>
");
            EndContext();
            BeginContext(9184, 138, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("select", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "b8a770b0cbb3c8b06f84f22178f5de1329093a379627", async() => {
                BeginContext(9264, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(9270, 41, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "b8a770b0cbb3c8b06f84f22178f5de1329093a3710011", async() => {
                    BeginContext(9287, 15, true);
                    WriteLiteral("Select Category");
                    EndContext();
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_0.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(9311, 2, true);
                WriteLiteral("\r\n");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper);
#line 188 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/Transactions/Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.For = ModelExpressionProvider.CreateModelExpression(ViewData, __model => __model.EquipmentID);

#line default
#line hidden
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-for", __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.For, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
#line 188 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/Transactions/Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.Items = Model.Equipments;

#line default
#line hidden
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-items", __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.Items, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(9322, 19, true);
            WriteLiteral("\r\n<h4>Assets</h4>\r\n");
            EndContext();
            BeginContext(9341, 56, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("select", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "b8a770b0cbb3c8b06f84f22178f5de1329093a3713248", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.SelectTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
#line 192 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/Transactions/Create.cshtml"
__Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.For = ModelExpressionProvider.CreateModelExpression(ViewData, __model => __model.AssetID);

#line default
#line hidden
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-for", __Microsoft_AspNetCore_Mvc_TagHelpers_SelectTagHelper.For, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(9397, 2064, true);
            WriteLiteral(@"
                </tr>
                <tr>
                    <td>
                        <input type=""text"" class=""form-control"" id=""assetName"" />
                        <span class=""error"">Asset name required</span>
                    </td>
                    <td>
                        <input type=""text"" class=""form-control"" id=""quantity"" />
                        <span class=""error"">Valid quantity required</span>
                    </td>
                    <td>
                        <input type=""text"" class=""form-control"" id=""rate"" />
                        <span class=""error"">Valid rate required</span>
                    </td>
                    <td>
                        <input type=""button"" class=""btn btn-primary"" id=""add"" value=""add"" />
                    </td>
                </tr>
            </table>
            <div id=""orderItems"" class=""tablecontainer"">
 
            </div>
            <div style=""padding:10px 0px; text-align:right"">
                <inp");
            WriteLiteral(@"ut id=""submit"" type=""button"" class=""btn btn-success"" value=""Save"" style=""padding:10px 20px"" />
            </div>
        </div>
    </div>
 

<link rel=""stylesheet"" href=""//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"">
</div>
</div>
 
<style>
    /*Adding some css for looks good*/
    span.error {
        display:block;
        visibility:hidden;
        color:red;
        font-size:90%;
    }
 
 
    /*css for table*/
    .container td {
        vertical-align: top;
    }
    .tablecontainer table {
        width: 100%;
        border-collapse: collapse;
        border-top: 1px solid #BFAEAE;
        border-right: 1px solid #BFAEAE;
    }
    .tablecontainer th {
        border-bottom: 2px solid #BFAEAE !important;
    }
    .tablecontainer th, .tablecontainer td {
        text-align: left;
        border-left: 1px solid #BFAEAE;
        padding: 5px;
        border-bottom: 1px solid #BFAEAE;
    }
    .ui-widget {
        font-size:12px !important;
   ");
            WriteLiteral(" }\r\n</style>\r\n\r\n");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(11479, 2, true);
                WriteLiteral("\r\n");
                EndContext();
#line 261 "/home/tenkay/Documents/DotNetProjects/HuliaSPMS/Pages/Transactions/Create.cshtml"
      await Html.RenderPartialAsync("_ValidationScriptsPartial");

#line default
#line hidden
                BeginContext(11549, 7357, true);
                WriteLiteral(@"     <script src=""//code.jquery.com/ui/1.11.4/jquery-ui.js""></script>
    <script>
        //Date Picker
        $(function () {
            $('#transactionDate').datepicker({
                dateFormat : 'mm-dd-yy'
            });
        });
 
        $(document).ready(function () {
            var orderItems = [];
            //Add button click function
            $('#add').click(function () {
                //Check validation of transaction asset
                var isValidItem = true;
                if ($('#assetName').val().trim() == '') {
                    isValidItem = false;
                    $('#assetName').siblings('span.error').css('visibility', 'visible');
                }
                else {
                    $('#assetName').siblings('span.error').css('visibility', 'hidden');
                }
 
                if (!($('#quantity').val().trim() != '' && !isNaN($('#quantity').val().trim()))) {
                    isValidItem = false;
                    $('#q");
                WriteLiteral(@"uantity').siblings('span.error').css('visibility', 'visible');
                }
                else {
                    $('#quantity').siblings('span.error').css('visibility', 'hidden');
                }
 
                if (!($('#rate').val().trim() != '' && !isNaN($('#rate').val().trim()))) {
                    isValidItem = false;
                    $('#rate').siblings('span.error').css('visibility', 'visible');
                }
                else {
                    $('#rate').siblings('span.error').css('visibility', 'hidden');
                }
 
                //Add asset to list if valid
                if (isValidItem) {
                    orderItems.push({
                        assetName: $('#assetName').val().trim(),
                        Quantity: parseInt($('#quantity').val().trim()),
                        Rate: parseFloat($('#rate').val().trim()),
                        TotalAmount: parseInt($('#quantity').val().trim()) * parseFloat($('#rate').val().trim(");
                WriteLiteral(@"))
                    });
 
                    //Clear fields
                    $('#assetName').val('').focus();
                    $('#quantity,#rate').val('');
 
                }
                //populate transaction items
                GeneratedItemsTable();
 
            });
            //Save button click function
            $('#submit').click(function () {
                //validation of transaction
                var isAllValid = true;
                if (orderItems.length == 0) {
                    $('#orderItems').html('<span style=""color:red;"">Please add transaction items</span>');
                    isAllValid = false;
                }
 
                if ($('#orderNo').val().trim() == '') {
                    $('#orderNo').siblings('span.error').css('visibility', 'visible');
                    isAllValid = false;
                }
                else {
                    $('#orderNo').siblings('span.error').css('visibility', 'hidden');
                ");
                WriteLiteral(@"}
 
                if ($('#transactionDate').val().trim() == '') {
                    $('#transactionDate').siblings('span.error').css('visibility', 'visible');
                    isAllValid = false;
                }
                else {
                    $('#transactionDate').siblings('span.error').css('visibility', 'hidden');
                }
 
                //Save if valid
                if (isAllValid) {
                    var data = {
                        OrderNo: $('#orderNo').val().trim(),
                        transactionDate: $('#transactionDate').val().trim(),
                        //Sorry forgot to add Description Field
                        Description : $('#description').val().trim(),
                        OrderDetails : orderItems
                    }
 
                    $(this).val('Please wait...');
 
                    $.ajax({
                        url: '/Home/SaveOrder',
                        type: ""POST"",
                        data");
                WriteLiteral(@": JSON.stringify(data),
                        dataType: ""JSON"",
                        contentType: ""application/json"",
                        success: function (d) {
                            //check is successfully save to database 
                            if (d.status == true) {
                                //will send status from server side
                                alert('Successfully done.');
                                //clear form
                                orderItems = [];
                                $('#orderNo').val('');
                                $('#transactionDate').val('');
                                $('#orderItems').empty();
                            }
                            else {
                                alert('Failed');
                            }
                            $('#submit').val('Save');
                        },
                        error: function () {
                            alert('Error. ");
                WriteLiteral(@"Please try again.');
                            $('#submit').val('Save');
                        }
                    });
                }
 
            });
            //function for show added items in table
            function GeneratedItemsTable() {
                if (orderItems.length > 0)
                {
                    var $table = $('<table/>');
                    $table.append('<thead><tr><th>Asset</th><th>Quantity</th><th>Rate</th><th>Total</th><th></th></tr></thead>');
                    var $tbody = $('<tbody/>');
                    $.each(orderItems, function (i, val) {
                        var $row = $('<tr/>');
                        $row.append($('<td/>').html(val.assetName));
                        $row.append($('<td/>').html(val.Quantity));
                        $row.append($('<td/>').html(val.Rate));
                        $row.append($('<td/>').html(val.TotalAmount));
                        var $remove = $('<a href=""#"">Remove</a>');
            ");
                WriteLiteral(@"            $remove.click(function (e) {
                            e.preventDefault();
                            orderItems.splice(i, 1);
                            GeneratedItemsTable();
                        });
                        $row.append($('<td/>').html($remove));
                        $tbody.append($row);
                    });
                    console.log(""current"", orderItems);
                    $table.append($tbody);
                    $('#orderItems').html($table);
                }
                else {
                    $('#orderItems').html('');
                }
            }
        });
 
    </script>
    <script>
    $(function () {
        $(""#EquipmentID"").on(""change"", function() {
            var assetId = $(this).val();
            $(""#AssetID"").empty();
            $(""#AssetID"").append(""<option value=''>Select Asset</option>"");
            $.getJSON(`?handler=Assets&assetId=${assetId}`, (data) => {
                $.each(data, function ");
                WriteLiteral("(i, item) {\r\n                    $(\"#AssetID\").append(`<option value=\"${item.AssetID}\">${item.AssetName}</option>`);\r\n                });\r\n            });\r\n        });\r\n    });\r\n</script>\r\n");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<CreateModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<CreateModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<CreateModel>)PageContext?.ViewData;
        public CreateModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
